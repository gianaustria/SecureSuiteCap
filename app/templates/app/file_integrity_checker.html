
{% extends "app/layout.html" %}
{% load static %}
{% block content %}
<div class="container mx-auto px-4 py-8">
    <div class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg shadow-lg p-6 mb-6">
        <h2 class="text-3xl font-bold">File Integrity Checker</h2>
        <p class="mt-2">Analyze files for malware, view logs, visualize data, collaborate, and manage policies.</p>
    </div>

    <ul class="nav nav-tabs flex flex-wrap border-b-0 mb-4" role="tablist">
        <li class="nav-item">
            <a class="nav-link active px-4 py-2 text-lg font-medium text-gray-700 bg-white border border-gray-200 rounded-t-lg shadow-sm hover:bg-blue-50 hover:text-blue-600 transition-colors" onclick="showSection('upload')" role="tab">Upload</a>
        </li>
        <li class="nav-item">
            <a class="nav-link px-4 py-2 text-lg font-medium text-gray-700 bg-white border border-gray-200 rounded-t-lg shadow-sm hover:bg-blue-50 hover:text-blue-600 transition-colors" onclick="showSection('logs')" role="tab">Logs</a>
        </li>
        <li class="nav-item">
            <a class="nav-link px-4 py-2 text-lg font-medium text-gray-700 bg-white border border-gray-200 rounded-t-lg shadow-sm hover:bg-blue-50 hover:text-blue-600 transition-colors" onclick="showSection('visualization')" role="tab">Visualization</a>
        </li>
        <li class="nav-item">
            <a class="nav-link px-4 py-2 text-lg font-medium text-gray-700 bg-white border border-gray-200 rounded-t-lg shadow-sm hover:bg-blue-50 hover:text-blue-600 transition-colors" onclick="showSection('collaboration')" role="tab">Collaboration</a>
        </li>
        <li class="nav-item">
            <a class="nav-link px-4 py-2 text-lg font-medium text-gray-700 bg-white border border-gray-200 rounded-t-lg shadow-sm hover:bg-blue-50 hover:text-blue-600 transition-colors" onclick="showSection('policies')" role="tab">Policies</a>
        </li>
    </ul>

    <div class="tab-content bg-white rounded-lg shadow-lg p-6">
        <div id="upload" class="section active">
            <h3 class="text-2xl font-semibold mb-4">Upload Files</h3>
            <form id="uploadForm" enctype="multipart/form-data" class="flex flex-col items-center space-y-4">
                {% csrf_token %}
                <input type="file" name="files" multiple accept=".exe,.dll,.pdf,.txt,.docx,.eml" class="form-control w-full max-w-md border-2 border-gray-300 rounded-lg p-2 file:bg-blue-50 file:border-0 file:rounded file:px-4 file:py-2 file:mr-4 hover:file:bg-blue-100 focus:ring-2 focus:ring-blue-500">
                <br />
                <button type="submit" class="btn btn-primary bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-lg transition-colors">Upload</button>
            </form>
            <br />
            <div id="results" class="mt-6 w-full space-y-4"></div>
        </div>

        <div id="logs" class="section hidden">
            <h3 class="text-2xl font-semibold mb-4">Logs</h3>
            <div id="logsList" class="space-y-4"></div>
        </div>

        <div id="visualization" class="section hidden">
            <h3 class="text-2xl font-semibold mb-4">Visualizations</h3>
            <div id="visualizationList" class="space-y-4"></div>
            <canvas id="visualizationChart" class="mt-4 max-w-full"></canvas>
        </div>

        <div id="collaboration" class="section hidden">
            <h3 class="text-2xl font-semibold mb-4">Collaboration</h3>
            <form id="collabForm" class="space-y-4">
                {% csrf_token %}
                <textarea name="message" class="form-control w-full border-2 border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500" rows="4" placeholder="Enter your message"></textarea>
                <button type="submit" class="btn btn-primary bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-lg transition-colors">Submit</button>
            </form>
            <div id="collabList" class="mt-6 space-y-4"></div>
        </div>

        <div id="policies" class="section hidden">
            <h3 class="text-2xl font-semibold mb-4">Policies</h3>
            <form id="policiesForm" class="space-y-4">
                {% csrf_token %}
                <!-- Policies loaded via AJAX -->
                <button type="submit" class="btn btn-primary bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-lg transition-colors">Update Policies</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}
